<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin â€“ Messages</title>
  <script src="https://cdn.jsdelivr.net/npm/supabase-js@2"></script>
  <style>
    body{font-family:Arial;background:#f4f4f4;padding:40px}
    table{width:100%;border-collapse:collapse;margin-top:20px}
    th,td{border:1px solid #ddd;padding:12px;text-align:left}
    th{background:#2c3e50;color:#fff}
  </style>
</head>
<body>
  <h1>Contact & Chatbot Messages</h1>
  <button onclick="loadMessages()">Refresh</button>
  <table id="msg-table">
    <thead><tr><th>Name</th><th>Email</th><th>Message</th><th>Date</th></tr></thead>
    <tbody></tbody>
  </table>

  <script>
    const SUPABASE_URL = 'https://YOUR-PROJECT.supabase.co';  // Replace
    const SUPABASE_KEY = 'YOUR-ANON-KEY';  // Replace
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function loadMessages() {
      const { data, error } = await supabaseClient
        .from('messages')
        .select('*')
        .order('created_at', { ascending: false });

      if (error) { console.error(error); return; }
      const tbody = document.querySelector('#msg-table tbody');
      tbody.innerHTML = '';
      data.forEach(m => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${m.name}</td><td>${m.email}</td><td>${m.message}</td><td>${new Date(m.created_at).toLocaleString()}</td>`;
        tbody.appendChild(tr);
      });
    }
    loadMessages();  // Auto-load on page open
  </script>
</body>
</html>